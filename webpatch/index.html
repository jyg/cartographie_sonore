<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>pd4web Template html</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <meta property="og:title" content="" />
    <meta property="og:image" content="" />
    <meta property="og:url" content="" />
    <meta property="og:site_name" content="" />
    <meta property="og:description" content="" />
    <meta name="twitter:title" content="" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:url" content="" />
    <meta name="twitter:card" content="" />
    <link rel="shortcut icon" href="favicon.ico" />
    <script src="./enable-threads.js"></script>
 
    <link
      href="https://fonts.googleapis.com/css?family=Karla:400,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <style>
      body {
        font-family: "Karla", Arial, sans-serif;
        line-height: 1.8;
        font-size: 16px;
        font-weight: 400;
        background: #ffffff;
        color: gray;
      }

      #footer {
        position: fixed;
        bottom: 0;
        width: 80%;
        height: 60px; /* Height of the footer */
      }
    </style>
  
  </head>
  <body style="margin-left: 10%; margin-right: 10%; overflow: hidden">
    <div id="page-container">
      <div style="display: flex; align-items: center; justify-content: center">
        <a id="Start-Audio-Button">
          <i
            id="SoundIcon"
            class="fa-solid fa-spinner fa-spin-pulse fa-2xl"
          ></i>
        </a>
        <a id="FullScreen-Trigger" style="margin-left: 20px">
          <i class="fa-solid fa-expand fa-2xl"></i>
        </a>
        <div style="display: flex; align-items: center">
          <select
            id="Input-Device-Select"
            style="text-align: center; display: none"
          >
            <option value="default">Default</option>
          </select>
        </div>
        <div style="display: flex; align-items: center">
          <select
            id="Output-Device-Select"
            style="text-align: center; display: none"
          >
            <option value="default">Default</option>
          </select>
        </div>
      </div>
    </div>

    <script src="./helpers.js"></script>
    <script src="./libpd.js"></script>
    <script src="../Libs/NexusUI.js"></script>
    <script src="../Libs/p5.min.js"></script>
  </body>
  <br />
 
  
<div id="targetslider"></div>
<div id="gainslider"></div>

  <script>
    
        function setup()
            {
                createCanvas(512, 512,WEBGL);
              
            }

            function draw()
            {
                background(200);
                noFill();
                   rotateY(frameCount * 0.01);
                let size = mouseX;
 //   sendToPureData("myfreq", size *10.0);
                if(mouseX > width)
                {
                    size = width
                }
                let details = map(mouseY, 0, height, 1, 20);
                //conversion to int as details takes ints
                details = int(details)
                sphere(size*0.5, details, details);
                
                }
                
   function mouseDragged() {
    sendToPureData("myfreq",mouseX * 10.0);}
                
    function mousePressed() {
              
                }
    // THIS CODE IS JUST FOR INTERNAL TESTES, YOU CAN REMOVE IT.
    // var originalConsoleLog = console.log;
    // console.log = function () {
    //   var logMessage = Array.from(arguments).join(" ");
    //   consoleLogMessages.push(logMessage);
    //   originalConsoleLog.apply(console, arguments);
    // };
    //
    // function captureLibPdMessages() {
    //   window.onerror = function (message, source, lineno, colno, error) {
    //     capturedMessages.push({
    //       message: message,
    //       source: source,
    //       lineno: lineno,
    //       colno: colno,
    //       error: error,
    //     });
    //   };
    //   window.message = function (message) {
    //     capturedMessages.push(message);
    //   };
    // }
    // captureLibPdMessages();
  
    var slider2 = new Nexus.Slider('#targetslider')
     var gain = new Nexus.Slider('#gainslider')
    slider2.on('change',function(v) {
 sendToPureData("myfreq", v*1000.0);
})
  gain.on('change',function(v) {
 sendToPureData("gain", v);
})
  </script>
</html>
